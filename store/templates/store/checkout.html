{% extends 'store/main.html' %}
{% load static %}
{% block content %}
<div class="row">
	<div class="col-lg-6">
		<div class="box-element" id="form-wrapper">
			<!-- <button onclick="window.alert('jesssi')"></button> -->
			<br>
			<img alt="Código QR" id="codigo">
			<br>
			<button id="btnDescargar">Descargar</button>
		</div>

		<script src="https://unpkg.com/qrious@4.0.2/dist/qrious.js"></script>

		<script>
			const $imagen = document.querySelector("#codigo"),
				$boton = document.querySelector("#btnDescargar");
			$linkNew = document.querySelector("#btnDescargar");
			new QRious({
				element: $imagen,
				value: "admin/store/orderitem/2", // La URL o el texto
				size: 500,
				backgroundAlpha: 0, // 0 para fondo transparente
				foreground: "#8bc34a", // Color del QR
				level: "H", // Puede ser L,M,Q y H (L es el de menor nivel, H el mayor)
			});
			$boton.onclick = () => {
				const enlace = document.createElement("a");
				enlace.href = $imagen.src;
				enlace.download = "Código QR generado desde parzibyte.me.png";
				enlace.click();
			}
		</script>




		<br>
		<div class="box-element hidden" id="qr">

			<!-- <div id="paypal-button-container"></div> -->
			<!--<button id="make-payment">Make payment</button>-->

		</div>

	</div>

	<div class="col-lg-6">
		<div class="box-element">
			<a class="btn btn-outline-dark" href="{% url 'cart' %}">&#x2190; Back to Cart</a>
			<hr>
			<h3>Order Summary</h3>
			<hr>
			{% for item in items %}
			<div class="cart-row">
				<div style="flex:2"><img class="row-image" src="{{item.product.imageURL}}"></div>
				<div style="flex:2">
					<p>{{item.product.name}}</p>
				</div>
				<div style="flex:1">
					<p>${{item.product.Precio|floatformat:2}}</p>
				</div>
				<div style="flex:1">
					<p>x{{item.quantity}}</p>
				</div>
			</div>
			{% endfor %}
			<h5>Items: {{order.get_cart_items}}</h5>
			<h5>Total: ${{order.get_cart_total|floatformat:2}}</h5>
		</div>
	</div>
</div>

<script src="https://unpkg.com/qrious@4.0.2/dist/qrious.js"></script>

<script>

	var total = '{{order.get_cart_total|floatformat:2}}'
	// Render the PayPal button into #paypal-button-container
	paypal.Buttons({


	}).render('#paypal-button-container');
</script>
{% endblock content %}